---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ComponentCard from "../../components/site/ComponentCard.astro";
import { getComponentsByCategory } from "../../data/component-meta";

const grouped = getComponentsByCategory();

const previews: Record<string, string> = {
  button: `<div class="flex gap-2">
    <span class="rounded-button bg-accent px-3 py-1 text-2xs font-display uppercase tracking-wider text-text-inverse">Primary</span>
    <span class="rounded-button border-2 border-text px-3 py-1 text-2xs text-text">Secondary</span>
  </div>`,
  badge: `<div class="flex gap-2">
    <span class="rounded-full bg-foreground text-background px-2 py-0.5 text-2xs font-medium">Default</span>
    <span class="rounded-full bg-accent text-text-inverse px-2 py-0.5 text-2xs font-medium">Primary</span>
    <span class="rounded-full border-2 border-text px-2 py-0.5 text-2xs font-medium text-text">Outline</span>
  </div>`,
  card: `<div class="w-full max-w-[10rem] rounded-card border-2 border-foreground/40 p-2 text-left">
    <p class="font-display text-xs uppercase tracking-wider text-text">Revenue</p>
    <p class="text-lg font-semibold text-text">$24,680</p>
    <p class="text-2xs text-text-muted">Updated 2h ago</p>
  </div>`,
  "kpi-card": `<div class="w-full max-w-[10rem] text-left">
    <p class="text-2xs text-text-tertiary">Total Revenue</p>
    <p class="text-lg font-semibold text-text">$18,230</p>
    <p class="text-2xs font-medium text-revenue">&uarr; 12.4%</p>
  </div>`,
  "metric-trend": `<div class="flex items-baseline gap-2">
    <span class="text-lg font-semibold text-text">$3,180</span>
    <span class="text-2xs font-medium text-loss">&darr; 5.7%</span>
  </div>`,
  "comparison-row": `<div class="w-full max-w-[14rem] flex items-center justify-between text-2xs">
    <span class="text-text-secondary">noecho.net</span>
    <div class="flex items-center gap-2">
      <span class="font-semibold text-text">$18,230</span>
      <span class="rounded-button bg-revenue-bg text-revenue px-1.5 py-0.5 font-medium">&uarr; 18.4%</span>
    </div>
  </div>`,
  sparkline: `<svg class="h-6 w-20" viewBox="0 0 80 24" fill="none">
    <polyline points="0,20 10,16 20,18 30,12 40,14 50,8 60,10 70,4 80,6" stroke="var(--accent)" stroke-width="2" fill="none" />
  </svg>`,
  "bar-chart": `<svg class="h-10 w-24" viewBox="0 0 96 40" fill="none">
    <rect x="2" y="20" width="8" height="20" rx="1" fill="var(--chart-1)" opacity="0.8" />
    <rect x="14" y="12" width="8" height="28" rx="1" fill="var(--chart-2)" opacity="0.8" />
    <rect x="26" y="8" width="8" height="32" rx="1" fill="var(--chart-3)" opacity="0.8" />
    <rect x="38" y="16" width="8" height="24" rx="1" fill="var(--chart-1)" opacity="0.8" />
    <rect x="50" y="4" width="8" height="36" rx="1" fill="var(--chart-2)" opacity="0.8" />
    <rect x="62" y="10" width="8" height="30" rx="1" fill="var(--chart-3)" opacity="0.8" />
    <rect x="74" y="6" width="8" height="34" rx="1" fill="var(--chart-1)" opacity="0.8" />
    <rect x="86" y="14" width="8" height="26" rx="1" fill="var(--chart-2)" opacity="0.8" />
  </svg>`,
  "line-chart": `<svg class="h-10 w-24" viewBox="0 0 96 40" fill="none">
    <polyline points="0,32 16,24 32,28 48,16 64,20 80,8 96,12" stroke="var(--chart-1)" stroke-width="2" fill="none" />
    <polyline points="0,36 16,30 32,34 48,26 64,28 80,18 96,22" stroke="var(--chart-2)" stroke-width="2" fill="none" opacity="0.6" />
  </svg>`,
  "area-chart": `<svg class="h-10 w-24" viewBox="0 0 96 40" fill="none">
    <path d="M0,32 L16,24 L32,28 L48,16 L64,20 L80,8 L96,12 L96,40 L0,40Z" fill="var(--chart-1)" opacity="0.2" />
    <polyline points="0,32 16,24 32,28 48,16 64,20 80,8 96,12" stroke="var(--chart-1)" stroke-width="2" fill="none" />
  </svg>`,
  "data-table": `<div class="w-full max-w-[14rem] text-2xs">
    <div class="flex gap-3 border-b border-surface-border pb-1 mb-1 font-medium text-text-tertiary">
      <span class="flex-1">Title</span><span class="w-12 text-right">Rev</span>
    </div>
    <div class="flex gap-3 text-text-secondary">
      <span class="flex-1 truncate">Top 10 Albums</span><span class="w-12 text-right">$310</span>
    </div>
    <div class="flex gap-3 text-text-secondary">
      <span class="flex-1 truncate">Farewell Tour</span><span class="w-12 text-right">$218</span>
    </div>
  </div>`,
  "filter-bar": `<div class="flex gap-1.5">
    <span class="rounded-button border border-surface-border bg-surface px-2 py-0.5 text-2xs text-text-tertiary">Site</span>
    <span class="rounded-button border border-surface-border bg-surface px-2 py-0.5 text-2xs text-text-tertiary">Author</span>
    <span class="rounded-button border border-surface-border bg-surface px-2 py-0.5 text-2xs text-text-tertiary">Source</span>
  </div>`,
  "date-range-picker": `<div class="rounded-button border border-surface-border bg-surface px-2.5 py-1 text-2xs text-text-secondary flex items-center gap-1.5">
    <svg class="h-3 w-3" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="3" width="12" height="11" rx="1"/><path d="M2 6h12M5 1v3M11 1v3"/></svg>
    Jan 1 – Jan 31
  </div>`,
  "sidebar-nav": `<div class="w-full max-w-[8rem] text-2xs space-y-0.5">
    <div class="rounded-button bg-surface-hover px-2 py-1 font-medium text-text">Dashboard</div>
    <div class="rounded-button px-2 py-1 text-text-secondary">Revenue</div>
    <div class="rounded-button px-2 py-1 text-text-secondary">Writers</div>
  </div>`,
  "page-header": `<div class="w-full max-w-[14rem] text-left">
    <p class="text-2xs text-text-tertiary">Dashboard / Revenue</p>
    <p class="text-sm font-semibold text-text">January 2026</p>
  </div>`,
  section: `<div class="w-full max-w-[14rem] text-left space-y-1">
    <div class="border-y-2 border-foreground/40 py-2">
      <p class="font-display text-xs uppercase tracking-wider text-text">Bordered</p>
    </div>
    <div class="bg-surface-tertiary/50 py-2 px-2 rounded-card">
      <p class="font-display text-xs uppercase tracking-wider text-text">Muted</p>
    </div>
  </div>`,
  "stat-card": `<div class="w-full max-w-[8rem] rounded-card bg-foreground p-2 text-left">
    <p class="font-display text-lg uppercase tracking-wider text-background">2.4M</p>
    <p class="text-2xs uppercase tracking-wider text-background/70">Pageviews</p>
  </div>`,
  "testimonial-card": `<div class="w-full max-w-[12rem] text-left">
    <p class="font-display text-xl leading-none text-accent">&ldquo;</p>
    <p class="text-2xs text-text-secondary italic">Analytics transformed our workflow...</p>
    <p class="mt-1 text-2xs font-semibold text-text">— Alex R.</p>
  </div>`,
  "pricing-card": `<div class="w-full max-w-[10rem] rounded-card border-2 border-foreground/40 p-2 text-left">
    <p class="font-display text-xs uppercase tracking-wider text-text">Pro</p>
    <p class="font-display text-lg text-text">$99<span class="text-2xs text-text-muted">/mo</span></p>
  </div>`,
  "logo-grid": `<div class="flex gap-3 items-center">
    <div class="h-4 w-12 rounded-sm bg-foreground/20"></div>
    <div class="h-4 w-12 rounded-sm bg-foreground/20"></div>
    <div class="h-4 w-12 rounded-sm bg-foreground/20"></div>
  </div>`,
  footer: `<div class="w-full max-w-[14rem] rounded-card bg-foreground p-2 text-left">
    <div class="flex gap-4 text-2xs text-background/70">
      <span>Network</span><span>Company</span><span>Legal</span>
    </div>
    <div class="mt-1 border-t border-background/20 pt-1 text-2xs text-background/50">&copy; 2026</div>
  </div>`,
  "fade-in": `<div class="flex flex-col gap-1">
    <div class="h-2 w-16 rounded-sm bg-foreground/30"></div>
    <div class="h-2 w-12 rounded-sm bg-foreground/20"></div>
    <div class="h-2 w-8 rounded-sm bg-foreground/10"></div>
  </div>`,
  "scale-in": `<div class="flex items-center justify-center">
    <div class="h-8 w-8 rounded-card border-2 border-foreground/40 flex items-center justify-center">
      <div class="h-3 w-3 rounded-full bg-accent/60"></div>
    </div>
  </div>`,
  "stagger-container": `<div class="flex gap-1.5">
    <div class="h-6 w-6 rounded-card border-2 border-foreground/40 bg-foreground/5"></div>
    <div class="h-6 w-6 rounded-card border-2 border-foreground/30 bg-foreground/3"></div>
    <div class="h-6 w-6 rounded-card border-2 border-foreground/20 bg-foreground/1"></div>
  </div>`,
};
---

<BaseLayout title="Components" description="Browse all 24 lambchop components grouped by category.">
  <div class="mx-auto max-w-7xl px-page-x py-12">
    <div class="mb-10">
      <h1 class="mb-2 text-3xl font-bold text-text">Components</h1>
      <p class="text-text-secondary">
        24 production-ready React components for dashboards, marketing sites, and more.
      </p>
    </div>

    {grouped.map(({ category, items }) => (
      <section class="mb-12">
        <h2 class="mb-4 text-lg font-semibold text-text">{category}</h2>
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
          {items.map((item) => (
            <ComponentCard
              name={item.name}
              slug={item.slug}
              description={item.description}
              category={item.category}
            >
              <Fragment set:html={previews[item.slug] || ""} />
            </ComponentCard>
          ))}
        </div>
      </section>
    ))}
  </div>
</BaseLayout>
